suite schism_suite
  edit ECF_HOME '/home/mjisan/workflow'
  edit ECF_INCLUDE '/home/mjisan/workflow'
  edit SCHISM_RUN_TYPE 'schism+wwm'  # Can be 'standalone', 'schism+wwm', or 'schism+wwm+atm'
  edit SCHISM_CLUSTER 'hercules'  # Can be 'hercules' or 'frontera'

  family preprocess
    task gen_manning
      edit ECF_SCRIPT '/home/mjisan/workflow/ecf/gen_manning.ecf'
    task gen_sflux_era5
      edit ECF_SCRIPT '/home/mjisan/workflow/ecf/gen_sflux_era5.ecf'
    task gen_bctides
      edit ECF_SCRIPT '/home/mjisan/workflow/ecf/gen_bctides.ecf'
    task gen_elevth
      edit ECF_SCRIPT '/home/mjisan/workflow/ecf/gen_elevth.ecf'
    task gen_namelist
      edit ECF_SCRIPT '/home/mjisan/workflow/ecf/gen_namelist.ecf'
  endfamily

  family job_submission
    trigger /schism_suite/preprocess == complete
    task gen_rundir
      edit ECF_SCRIPT '/home/mjisan/workflow/ecf/gen_rundir.ecf'
    task gen_jobcard
      edit ECF_SCRIPT '/home/mjisan/workflow/ecf/gen_jobcard.ecf'
    task submit_job
      trigger /schism_suite/job_submission/gen_rundir == complete and /schism_suite/job_submission/gen_jobcard == complete
      edit ECF_SCRIPT '/home/mjisan/workflow/ecf/submit_job.ecf'
    task wait_for_simulation
      trigger /schism_suite/job_submission/submit_job == complete
      edit ECF_SCRIPT '/home/mjisan/workflow/ecf/wait_for_simulation.ecf'
  endfamily

  family postprocess
    trigger /schism_suite/job_submission/wait_for_simulation == complete
    task plot_water_elevation
      edit ECF_SCRIPT '/home/mjisan/workflow/ecf/plot_water_elevation.ecf'
  endfamily

endsuite
